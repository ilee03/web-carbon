<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <link href="style.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <div class="body">
        <div class="logo">
            <img class="logo-img" src="./icons/icon-128x128.png">
            <div class="logo-text">WebCarbon Counter</div>
        </div>
        <hr>
        <div class="main-content">
            <div class="today">
                <div>Current CO<sub>2</sub>e:</div>
                <span id="current-carbon">0.00 g CO2e</span>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Fetch the carbon emission for the current website
            chrome.tabs.query({ active: true, currentWindow: true }, function (tabs) {
                let currentTab = tabs[0];
                if (currentTab) {
                    let emissions = calculateCarbonEmissions(currentTab.url); // Calculate emissions based on the URL
                    document.getElementById("current-carbon").innerText = emissions + " g CO2e"; // Display the emissions
                }
            });
        });

        // Function to calculate emissions based on the current website URL
        function calculateCarbonEmissions(url) {
            // Example logic for emissions calculation:
            // Assuming an average of 0.02 kg CO2e (20 g) emitted per MB of data transferred
            // and an estimated average data usage of 2 MB per page view.

            const averageDataUsageMB = 2; // Average data usage per page view in MB
            const emissionsPerMB = 20; // Emissions in grams CO2e per MB of data

            // Calculate total emissions for the page view
            const totalEmissions = (averageDataUsageMB * emissionsPerMB).toFixed(2); // Calculate total emissions

            return totalEmissions; // Return the total emissions
        }
    </script>
</body>

</html>
